{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Sai Nikhil/Desktop/github searching task/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Sai Nikhil/Desktop/github searching task/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/Sai Nikhil/Desktop/github searching task/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import\"./Home.css\";import axios from\"../../../axios\";import User from\"../../ui/User\";import Repo from\"../../ui/Repo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];//Users fetched from the API\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];//Page\nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];//Per page\nvar _useState7=useState(100),_useState8=_slicedToArray(_useState7,2),limit=_useState8[0],setLimit=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),currentpage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),activepage=_useState12[0],setActivetPage=_useState12[1];var _useState13=useState(10),_useState14=_slicedToArray(_useState13,1),perPage=_useState14[0];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),offset=_useState16[0],setOffset=_useState16[1];var pageNumbers=[];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setmessage=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),loader=_useState20[0],setLoader=_useState20[1];for(var i=0;i<Math.ceil(users.length)/perPage;i++){pageNumbers.push(i);}var handleChange=function handleChange(e,pageno){//console.log(\"test\")\n//console.log(\"pageno\"+pageno)\nsetCurrentPage(Math.ceil(users.length/perPage));var selectedPage=pageno;setActivetPage(pageno);setOffset(selectedPage*perPage);};var slice=users.slice(offset,offset+perPage);var handleQueryInput=function handleQueryInput(e){setmessage(\"\");var value=e.target.value;setQuery(value);};var handlePrevPage=function handlePrevPage(){setPage(function(page){if(page===1)return page;else return page-1;});};var handleNextPage=function handleNextPage(){setPage(function(page){return page+1;});};var handlePageLimit=function handlePageLimit(e){var value=e.target.value;setLimit(parseInt(value));};var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/search/users?q=\"+query,{params:{page:page,per_page:limit}});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data===null||data===void 0?void 0:data.items);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);return _context.abrupt(\"return\",null);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchUsers(){return _ref.apply(this,arguments);};}();var handleSearchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var items;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoader(1);e.preventDefault();//console.log(\"ssss\")\nif(!query){_context2.next=10;break;}_context2.next=5;return fetchUsers();case 5:items=_context2.sent;if(items){setLoader(0);}setUsers(items);_context2.next=11;break;case 10://console.log(\"Your query is empty...\");\nsetmessage(\"Please enter name...\");case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSearchUsers(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var displayUsersOnChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var items;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!query){_context3.next=5;break;}_context3.next=3;return fetchUsers();case 3:items=_context3.sent;setUsers(items);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function displayUsersOnChange(){return _ref3.apply(this,arguments);};}();displayUsersOnChange();},[page,limit]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"GitHub Search\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{value:query,onChange:handleQueryInput,type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearchUsers,children:\"Search\"})]}),/*#__PURE__*/_jsx(\"span\",{children:message})]}),loader==1?/*#__PURE__*/_jsxs(\"div\",{className:\"lds-spinner\",children:[\"Loading...\",/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"more-options\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:pageNumbers.map(function(page){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){return handleChange(event,page);},children:/*#__PURE__*/_jsx(\"span\",{className:page==activepage?'page-link active':'page-link',children:page+1},page)});})})}),slice?slice.map(function(user){return/*#__PURE__*/_jsx(User,{user:user},user.id);}):/*#__PURE__*/_jsx(\"h4\",{children:\"No data\"})]})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","User","Repo","Home","query","setQuery","users","setUsers","page","setPage","limit","setLimit","currentpage","setCurrentPage","activepage","setActivetPage","perPage","offset","setOffset","pageNumbers","message","setmessage","loader","setLoader","i","Math","ceil","length","push","handleChange","e","pageno","selectedPage","slice","handleQueryInput","value","target","handlePrevPage","handleNextPage","handlePageLimit","parseInt","fetchUsers","get","params","per_page","data","items","console","error","handleSearchUsers","preventDefault","displayUsersOnChange","map","event","user","id"],"sources":["C:/Users/Sai Nikhil/Desktop/github searching task/src/components/pages/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Home.css\";\r\nimport axios from \"../../../axios\";\r\nimport User from \"../../ui/User\";\r\nimport Repo from \"../../ui/Repo\"\r\nconst Home = () => {\r\n  const [query, setQuery] = useState(\"\");\r\n  //Users fetched from the API\r\n  const [users, setUsers] = useState([]);\r\n  //Page\r\n  const [page, setPage] = useState(1);\r\n  //Per page\r\n  const [limit, setLimit] = useState(100);\r\n\r\n  const [currentpage, setCurrentPage] = useState(0)\r\n  const [activepage, setActivetPage] = useState(0)\r\n  const [perPage] = useState(10);\r\n  const [offset, setOffset] = useState(0);\r\n  const pageNumbers = [];\r\n  const [message, setmessage] = useState(\"\");\r\n  const [loader, setLoader] = useState(0);\r\n\r\n\r\n  for (let i = 0; i<Math.ceil(users.length)/perPage; i++){\r\n    pageNumbers.push(i)\r\n}\r\n\r\nconst handleChange = (e, pageno) => {\r\n    //console.log(\"test\")\r\n    //console.log(\"pageno\"+pageno)\r\n    setCurrentPage(Math.ceil(users.length/perPage));\r\n    const selectedPage = pageno;\r\n    setActivetPage(pageno);\r\n    setOffset(selectedPage*perPage);\r\n\r\n\r\n}\r\n\r\nconst slice = users.slice(offset, offset + perPage)\r\n\r\n  const handleQueryInput = (e) => {\r\n    setmessage(\"\");\r\n    const value = e.target.value;\r\n    setQuery(value);\r\n  };\r\n  const handlePrevPage = () => {\r\n    setPage((page) => {\r\n      if (page === 1) return page;\r\n      else return page - 1;\r\n    });\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    setPage((page) => page + 1);\r\n  };\r\n\r\n  const handlePageLimit = (e) => {\r\n    const value = e.target.value;\r\n    setLimit(parseInt(value));\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const { data } = await axios.get(\"/search/users?q=\" + query, {\r\n        params: {\r\n          page,\r\n          per_page: limit,\r\n        },\r\n      });\r\n      return data?.items;\r\n    } catch (error) {\r\n      console.error(error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleSearchUsers = async (e) => {\r\n    setLoader(1)\r\n    e.preventDefault();\r\n    //console.log(\"ssss\")\r\n    if (query) {\r\n      \r\n      const items = await fetchUsers();\r\n      if(items)\r\n      {\r\n        setLoader(0)\r\n      }\r\n      setUsers(items);\r\n    } else {\r\n      //console.log(\"Your query is empty...\");\r\n      setmessage(\"Please enter name...\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const displayUsersOnChange = async () => {\r\n      if (query) {\r\n        const items = await fetchUsers();\r\n        setUsers(items);\r\n      }\r\n    };\r\n    displayUsersOnChange();\r\n  }, [page, limit]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"search-form\">\r\n        <h2>GitHub Search</h2>\r\n        <form>\r\n          <input value={query} onChange={handleQueryInput} type=\"text\" />\r\n          <button onClick={handleSearchUsers}>Search</button>\r\n          \r\n        </form>\r\n        <span>{message}</span>\r\n      </div>\r\n      {loader==1 ? <div className=\"lds-spinner\">Loading...<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div> : '' }\r\n      <div className=\"search-results\">\r\n        <div className=\"more-options\">\r\n         \r\n          <div className=\"pagination\">\r\n         \r\n            {pageNumbers.map(page => (  \r\n                    <button onClick={(event) => handleChange(event,page)}><span key={page} className={(page)==(activepage) ? 'page-link active' : 'page-link' }>  \r\n                      {page+1}</span>\r\n                      </button>\r\n              ))} \r\n          </div>\r\n          \r\n        </div>\r\n        {slice ? (\r\n          slice.map((user) => {\r\n            return <User user={user} key={user.id} />;\r\n          })\r\n        ) : (\r\n          <h4>\r\n            No data\r\n          </h4>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}